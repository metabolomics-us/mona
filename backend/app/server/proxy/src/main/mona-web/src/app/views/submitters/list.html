<div>
  <h3>Manage Submitters</h3>
  <br/>
</div>

<div class="row" *ngIf="!auth.isLoggedIn()">
    <div class="col-md-12">
        <h3><fa-icon [icon]="faUser"></fa-icon> Please <a href="" (click)="auth.requestModal()">log in</a>!</h3>
    </div>
</div>

<div *ngIf="auth.isLoggedIn() && auth.isAdmin()">
    <div #error></div>
    <form role="form">
        <div class="input-group">
<!--          This was the query bar for each user, commented out 8/21-->
<!--            <span class="form-check-label"> <label [for]="'query_'+i">Filter</label></span>-->
<!--            <input [id]="'query_'+i" class="form-control" name="query" [(ngModel)]="sub.query"-->
<!--                   placeholder="Query term"/>-->
            <table class="table">
                <thead>
                <tr>
                    <th>First</th>
                    <th>Last</th>
                    <th>Institution</th>
                    <th>Email</th>
<!--                    <th>Avg Score</th>-->
<!--                    <th>Uploaded Spectra</th>-->
                    <th></th>
                </tr>
                </thead>
                <tbody>
                <tr *ngFor="let sub of submitters; index as i" id="submitter_{{sub.id}}">
                    <td><submitter-query [submitter]="sub"><a class="davis-blue">{{sub.firstName}}</a></submitter-query></td>
                    <td>{{sub.lastName}}</td>
                    <td>{{sub.institution}}</td>
                    <td>{{sub.emailAddress}}</td>
                    <td>
                        <button (click)="displayEditDialog(sub)" class="btn btn-default" ngbTooltip="Edit user">
                          <fa-icon [icon]="faEdit"></fa-icon>
                        </button>

                        <button (click)="askToDelete(sub)" class="btn btn-default" ngbTooltip="Delete user">
                          <fa-icon [icon]="faMinusSquare"></fa-icon>
                        </button>

                        <input type="hidden" name="sub.id" name="subid" [(ngModel)]="sub.id" value="{{sub.id}}"/>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
      <!-- Toast for User Delete Confirmation -->
      <ngb-toast *ngIf="showDeletionConfirmation" header="Confirm Deletion" (hidden)="cancelUserDelete()"
                 [autohide]="false" class="toast-centered bg-light text-nowrap">
        Delete user <b>{{pendingUser?.emailAddress}}</b>?
        <div class="mt-2">
          <button class="btn btn-primary btn-sm" (click)="cancelUserDelete()">Cancel</button>
          <button class="btn btn-danger btn-sm ml-3" (click)="confirmUserDelete()">Delete</button>
        </div>
      </ngb-toast>

        <button (click)="displayCreateDialog()" class="btn btn-primary btn-sm"><fa-icon
                [icon]="faUser"></fa-icon> Add New Submitter
        </button>
    </form>
</div>
