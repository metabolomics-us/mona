<div ng-value="error"></div>
<div class="row">
    <div class="col-md-9 col-sm-6 col-lg-9">
        <table class="table table-hover" style="table-layout: fixed;" infinite-scroll="loadMoreSpectra()">
            <thead>
            <tr>
                <th class="text-center">Name</th>
                <th class="text-right" style="width: 110px">Bio. Structure</th>
                <th class="text-right" style="width: 110px">Chem. Structure</th>
                <th class="text-right" style="width: 110px">Spectrum</th>
                <th class="text-center">Accurate Mass</th>

            </tr>
            </thead>
            <tbody>
            <tr ng-show="spectra.length == 0">
            </tr>
            <tr ng-repeat="spectrum in filteredSpectra = (spectra | spectraQuery:this)"
                ng-click="viewSpectrum($index)">
                <td>
                    <ul class="list-unstyled">
                        <li ng-repeat="name in spectrum.chemicalCompound.names">{{name.name}}</li>
                    </ul>
                </td>
                <td>
                    <div class="center-block" chemical-sketcher readonly="true" width="100" height="100"
                         id="bioSketch_{{spectrum.id}}"
                         ng-model="spectrum.biologicalCompound"></div>
                </td>
                <td>
                    <div class="center-block" chemical-sketcher readonly="true" width="100" height="100"
                         id="chemSketch_{{spectrum.id}}"
                         ng-model="spectrum.chemicalCompound"></div>
                </td>
                <td>
                    <div class="masspec-mini">
                        <mass-spec id="massSpec_{{spectrum.id}}" mini ng-model="spectrum.spectrum"></mass-spec>
                    </div>
                </td>
                <td>

                </td>
            </tr>
            </tbody>
        </table>
        <div class="text-center" ng-show="loadingMore"><span class="spinner"><i class="fa fa-refresh fa-spin"></i> Loading...</span>
        </div>
        <div class="text-center" ng-show="filteredSpectra.length == 0 && !loadingMore"><h4>No results found!</h4>
        </div>
    </div>


    <div class="col-md-3 col-sm-6 col-lg-3">
        <div id="filterBar" bs-affix data-offset-top="200" data-offset-bottom="300">

            <!-- search bar -->
            <button class="btn btn-primary" ng-click="querySpectraDialog()"><i
                    class="fa fa-search fa-fw"></i>Open Query Dialog
            </button>

            <div class="top17"></div>
            <!-- filter by tags -->
            <form name="spectraQuery" role="form" class="form-vertical">
                <fieldset>
                    <legend>refine result</legend>

                    <div class="form-group" ng-class="{ 'has-error': spectraQuery.newNameFilter.$invalid }">
                        <label class="control-label" for="newNameFilter">Filter by Name</label>

                        <input id="newNameFilter" name="newNameFilter" ng-model="newNameFilter"
                               placeholder="Compound Name"
                               class="form-control"
                               ng-keyup="$event.keyCode == 13 ? addNameFilter() : null">

                        <ul class="list-unstyled">
                            <li ng-repeat="(name, _) in nameFilters">
                                        <span class="label label-primary"
                                              ng-click="removeNameFilter(name)">{{name}}</span>
                            </li>
                        </ul>
                    </div>

                    <div class="form-group"
                         ng-class="{ 'has-error': spectraQuery.newInchiFilter.$invalid }">
                        <label class="control-label" for="newInchiFilter">Filter by InChI Key</label>

                        <input id="newInchiFilter" name="newInchiFilter" ng-model="newInchiFilter"
                               placeholder="InChIKey"
                               class="form-control"
                               ng-keyup="$event.keyCode == 13 ? addInchiFilter() : null"
                               ng-pattern="/^([A-Z]{14}-[A-Z]{10}-[A-Z,0-9])+$/">

                        <ul class="list-unstyled">
                            <li ng-repeat="(inchi, _) in inchiFilters">
                                    <span class="label label-primary"
                                          ng-click="removeInchiFilter(inchi)">{{inchi}}</span>
                            </li>
                        </ul>
                    </div>

                    <div class="form-group"
                         ng-class="{ 'has-error': spectraQuery.newInchiPartialFilter.$invalid }">
                        <label class="control-label" for="newInchiPartialFilter">Filter by Partial InChI
                            Key</label>

                        <input id="newInchiPartialFilter" name="newInchiPartialFilter"
                               ng-model="newInchiPartialFilter"
                               placeholder="InChIKey"
                               class="form-control"
                               ng-keyup="$event.keyCode == 13 ? addPartialInchiFilter() : null"
                               ng-pattern="/^[A-Z,0-9,-]+$/">

                        <ul class="list-unstyled">
                            <li ng-repeat="(inchi, _) in partialInchiFilters">
                            <span class="label label-primary"
                                  ng-click="removePartialInchiFilter(inchi)">{{inchi}}</span>
                            </li>
                        </ul>
                    </div>

                    <div class="form-group">
                        <label for="tags-select" class=" control-label">Filter By Tags</label><br/>

                        <select id="tags-select" name="tags-select" data-placeholder="Select Tags"
                                ng-model="tagsSelection"
                                ng-options="tag.text for tag in tags" multiple ng-multiple="true"
                                multiselect-dropdown class="form-control"></select>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div>
